this is main code in production
